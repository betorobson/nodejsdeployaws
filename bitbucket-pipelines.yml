image: node:10.15.0
pipelines:
  default:
    - step:
        script:
          - docker build -t betorobson/nodejsapp1:bitbucket-pipelines-v1-$BITBUCKET_COMMIT .
        services:
          - docker
    - step:
        script:
          - echo "${BITBUCKET_PASSWORKD}" | docker login -u ${BITBUCKET_ACCOUNT} --password-stdin
          - docker push betorobson/nodejsapp1:bitbucket-pipelines-v1-$BITBUCKET_COMMIT
        services:
          - docker